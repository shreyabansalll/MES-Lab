LJMP MAIN
ORG 0030H
MAIN:
MOV P1,#00H ;INITIALISE P1 ALL PINS LOW
LOOP:
CPL P1.0 ;TOGGLE P1.0 (LED CONNECTED TO THIS PIN)
ACALL DELAY ;CALL DELAY SUBROUTINE
SJMP LOOP ;LOOP FOREVER
;TIMER- BASED DELAY SUBROUTINE
DELAY:
MOV TMOD, #01H ;SET TIMER 0 IN MODE 1(16-BIT TIMER)
MOV TH0, #3CH;LOAD HIGH BYTE FOR ~50MS DELAY
MOV TL0, #0B0H ;LOAD LOW BYTE (3CB0H=15536)
SETB TR0 ;START TIMER 0
WAIT:
JNB TF0, WAIT ;WAIT UNTIL TIMER OVERFLOW
CLR TR0
CLR TR0 ;CLR OF FLAG AND STOP T0
;REPEAT DELAY CREATE LONGER DELAY
;SIMPLE DELAY LOOP
RET ; RETURN FROM SUBROUTINE
END